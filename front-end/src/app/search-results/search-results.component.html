<div class="row mat-typography header-bar">
    <div style="text-align:center" class="mat-typography title">
        <a [routerLink]="['/']"><h1>Grocerybot</h1></a>
    </div>
  <form class="example-form header-inner">

    <mat-form-field class="search-bar">
      <input name="searchQuery" matInput [(ngModel)]='searchQuery' placeholder="Enter your search query here">
    </mat-form-field>

    <button class="search-button" mat-raised-button color="primary" (click)="searchClicked()">Search</button>

  </form>
</div>

<div class="main-content">


  <div class="mat-typography">
    <p>Loaded {{ resultsReturned }} results in {{ resultsTook }} ms</p>
  </div>

  <div class="options-wrapper" >

    <mat-select placeholder="View Mode" [(ngModel)]='viewMode' class="hide-under-600px options-child">
      <mat-option [value]="0">Regular Mode</mat-option>
      <mat-option [value]="1">Compact Mode</mat-option>
    </mat-select>

    <mat-select placeholder="Sort by" [(ngModel)]='sortMode' (ngModelChange)="updateSort()" class="options-child">
      <mat-option [value]="0">Sort by Relevance</mat-option>
      <mat-option [value]="1">Sort by Price</mat-option>
    </mat-select>

  </div>
  
  <div class="mat-typography" *ngIf="resultsReturned < 1">
    <span>Did you mean</span>
    <div *ngFor="let term of spellSuggestions">
        <span *ngFor="let suggestion of term.options">
          <button mat-button color="primary" (click)="suggestionClicked(suggestion.text)">{{ suggestion.text }} </button>
        </span>
      </div>
  </div>
  
  <div class="row">

    <ul class="card">
      <li *ngFor="let product of searchResults" [className]="viewMode == 1 ? 'comp-mode' : 'reg-mode'">
        <mat-card matRipple (click)="productClicked(product._source.url)" class="cursor-pointer no-text-select">
          <div [className]="viewMode == 1 ? 'header-compact' : 'header'">
              <div class="header-aside">
                  <span>{{product._source.supermarket}}</span>
              </div>
            <div class="header-main">
                <a target="_blank" [innerHtml]="product._source.product_name | highlight:searchQuery"></a>
                <br><span class="product-url" [innerHtml]="product._source.url"></span>
                <p [innerHtml]="product._source.page_title | highlight:searchQuery"></p>
            </div>
            <div class="header-aside text-align-right">
              <span> {{ product._source.weight }} </span>
            </div>
            <div class="header-aside text-align-right">
              <span class="product-price">â‚¬ {{product._source.price}}</span>
            </div>
          </div>
          <mat-card-content class="last-child">

          </mat-card-content>
        </mat-card>
      </li>
    </ul>
  </div>

  <div *ngIf="resultsLoaded < resultsReturned">
    <button (click)="loadMoreClicked()" style="width: 100%; margin-bottom: 5em" mat-button>Load More Results</button>
  </div>
  
</div>